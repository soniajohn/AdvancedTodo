{"ast":null,"code":"var _jsxFileName = \"/home/sonia/projects/AdvancedTodo/client/src/components/TaskList.js\",\n    _s = $RefreshSig$();\n\nimport react from 'react';\nimport React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useContext } from 'react';\nimport Axios from 'axios';\nimport { ListContext } from '../context/ListContext.js';\nimport { useRef, useEffect } from 'react';\nimport { subnetMatch } from 'ipaddr.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Tasklist = () => {\n  _s();\n\n  const {\n    username,\n    SetUsername,\n    userid,\n    SetUserid,\n    childtaskid,\n    Setchildtaskid\n  } = useContext(ListContext);\n  const {\n    optionname,\n    setOptionname\n  } = useContext(ListContext);\n  const [task, setTasks] = useState(\"\");\n  const [items, setItems] = useState([]);\n  const [toggleBtn, setToggleBtn] = useState(true);\n  const [isEditItem, setIsEditItem] = useState(null);\n  const [optStatus, setOptStatus] = useState(false);\n  const [taskValue, setTaskvalue] = useState(\"\");\n  const [validatevalue, setValidatevalue] = useState(\"\");\n  const [fetchlist, setFetchlist] = useState([]);\n  const [showList, setshowList] = useState([]);\n  let history = useHistory();\n  const [usertasklist, setUsertasklist] = useState([]);\n\n  function passData(val) {\n    if (val.length > 0) {\n      var name = val[0].toUpperCase() + val.slice(1);\n    }\n\n    setTasks(name);\n    return val.length < 15 ? '' : setValidatevalue(\"max char 15\");\n  } //////\n\n\n  const submitTask = () => {\n    if (task) {\n      Axios.post(`http://localhost:4000/users/${userid}/todolists`, {\n        task: task\n      }).then(response => {\n        alert(\"successful insert\");\n      });\n      addItem();\n    } else {\n      setTaskvalue(\"please fill the field\");\n      inputRef.current.focus();\n    }\n  };\n\n  const inputRef = useRef();\n  useEffect(() => {\n    inputRef.current.focus();\n  }); ////////\n\n  const deleteItem = (id, todolist_id) => {\n    const updatedItems = items.filter((elm, ind) => {\n      return ind !== id;\n    });\n    deleteTask(todolist_id);\n    setItems(updatedItems);\n  };\n\n  const updateTask = (tasname, todolistid) => {\n    Axios.put(`http://localhost:4000/users/${userid}/todolists/${todolistid}`, {\n      tasname: tasname\n    }).then(response => {//alert(\"update\");\n    });\n  };\n\n  useEffect(() => {\n    Axios.get(`http://localhost:4000/users/${userid}/todolists`, {}).then(response => {\n      var todoid = response.data[0].Todoid;\n      setItems(response.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const deleteTask = (todolist_id, userid) => {\n    alert(\"id=\" + todolist_id);\n    Axios.delete(`http://localhost:4000/users/${userid}/todolists/${todolist_id}`);\n  };\n\n  const addItem = () => {\n    if (!task) {} else if (task && !toggleBtn) {\n      setItems(items.map(elem => {\n        if (elem.Todoid === isEditItem) {\n          setToggleBtn(true);\n          setTasks(\" \");\n          updateTask(task, elem.Todoid);\n          return { ...elem,\n            Todoname: task\n          };\n        }\n\n        return elem;\n      }));\n    } else {\n      setItems([{\n        Todoname: task,\n        status: false\n      }, ...items]);\n      setTasks(\"\");\n      setValidatevalue(\"\");\n    }\n  };\n\n  const editItem = id => {\n    let newEditItem = items.find(elem => {\n      return elem.Todoid === id;\n    });\n    setToggleBtn(false);\n    setTasks(newEditItem.Todoname);\n    setIsEditItem(id);\n  };\n\n  const redirectTask = () => {\n    history.push(\"/users/:userid/Todolists/:todolistId/tasks\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(react.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"parent_div\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"secondcontainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"logout\",\n            class: \"closebtn\",\n            title: \"Log out\",\n            onClick: () => {\n              history.push(\"/\");\n            },\n            children: \" ...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"heading\",\n            children: [\" Hi...\", username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 61\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"thirdcontainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              ref: inputRef,\n              class: \"todonametxt\",\n              title: validatevalue,\n              value: task,\n              autoComplete: \"off\",\n              maxLength: \"20\",\n              onChange: e => passData(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), \"\\xA0\\xA0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"imgbutton\",\n            children: toggleBtn ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: submitTask,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                class: \"plusimage\",\n                src: \"/image/plus.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 58\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addItem,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                class: \"plusimage\",\n                title: \"edit\",\n                src: \"https://img.icons8.com/color/48/000000/edit-property.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 147\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 121\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), items.map((elm, ind) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"insert\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"taskname\",\n                onChange: e => {\n                  setItems(items.filter(obj2 => {\n                    if (obj2.childtodo_id === elm.childtodo_id) {\n                      obj2.status = e.target.checked;\n                      setOptionname(elm.Todoname); // (elm.Todoid)\n\n                      Setchildtaskid(elm.Todoid); //setOptionname(items)\n                      //   updateTaskStatus(obj2.text,obj2.status,obj2.Todoid)\n                    }\n\n                    return obj2;\n                  }));\n                },\n                value: elm.Todoname,\n                checked: elm.status,\n                class: \"optionbtn\",\n                name: \"option\",\n                onClick: redirectTask\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                name: \"text\",\n                children: elm.Todoname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                title: \"edit item\",\n                class: \"editimg\",\n                src: \"https://img.icons8.com/color/48/000000/edit-property.png\",\n                onClick: () => editItem(elm.Todoid)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fa fa-trash\",\n                title: \"delete Item\",\n                onClick: () => deleteItem(ind, elm.Todoid)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 21\n              }, this)]\n            }, ind, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Tasklist, \"64aCec0plRDqtG5ct6tOk/8PXCE=\", false, function () {\n  return [useHistory];\n});\n\n_c = Tasklist;\nexport default Tasklist;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tasklist\");","map":{"version":3,"sources":["/home/sonia/projects/AdvancedTodo/client/src/components/TaskList.js"],"names":["react","React","useState","Link","useHistory","useContext","Axios","ListContext","useRef","useEffect","subnetMatch","Tasklist","username","SetUsername","userid","SetUserid","childtaskid","Setchildtaskid","optionname","setOptionname","task","setTasks","items","setItems","toggleBtn","setToggleBtn","isEditItem","setIsEditItem","optStatus","setOptStatus","taskValue","setTaskvalue","validatevalue","setValidatevalue","fetchlist","setFetchlist","showList","setshowList","history","usertasklist","setUsertasklist","passData","val","length","name","toUpperCase","slice","submitTask","post","then","response","alert","addItem","inputRef","current","focus","deleteItem","id","todolist_id","updatedItems","filter","elm","ind","deleteTask","updateTask","tasname","todolistid","put","get","todoid","data","Todoid","catch","err","console","log","delete","map","elem","Todoname","status","editItem","newEditItem","find","redirectTask","push","e","target","value","obj2","childtodo_id","checked"],"mappings":"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","sourcesContent":["import react from 'react';\nimport React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useContext } from 'react';\nimport Axios from 'axios';\nimport { ListContext } from '../context/ListContext.js'\nimport { useRef, useEffect } from 'react';\nimport { subnetMatch } from 'ipaddr.js';\n\n\n\n\n\nconst Tasklist = () => {\n\n\n  const { username, SetUsername, userid, SetUserid, childtaskid, Setchildtaskid } = useContext(ListContext);\n  const { optionname, setOptionname } = useContext(ListContext)\n  const [task, setTasks] = useState(\"\");\n  const [items, setItems] = useState([]);\n  const [toggleBtn, setToggleBtn] = useState(true);\n  const [isEditItem, setIsEditItem] = useState(null);\n  const [optStatus, setOptStatus] = useState(false);\n  const [taskValue, setTaskvalue] = useState(\"\")\n  const [validatevalue, setValidatevalue] = useState(\"\")\n  const [fetchlist, setFetchlist] = useState([])\n  const [showList, setshowList] = useState([])\n\n  let history = useHistory();\n\n  const [usertasklist, setUsertasklist] = useState([])\n\n\n\n\n\n\n\n\n  function passData(val) {\n    if (val.length > 0) {\n      var name = val[0].toUpperCase() + val.slice(1)\n\n    }\n\n    setTasks(name);\n\n    return val.length < 15 ? '' : setValidatevalue(\"max char 15\");\n\n  }\n\n\n//////\n  const submitTask = () => {\n\n    if (task) {\n\n\n      Axios.post(`http://localhost:4000/users/${userid}/todolists`, {\n\n        task: task\n      }).then((response) => {\n        \n        \n        alert(\"successful insert\")\n      });\n      addItem();\n\n\n\n    }\n    else {\n      setTaskvalue(\"please fill the field\");\n      inputRef.current.focus();\n    }\n  };\n\n\n\n  const inputRef = useRef();\n  useEffect(() => {\n    inputRef.current.focus();\n\n  })\n////////\n\n\n\n  const deleteItem = (id, todolist_id) => {\n    const updatedItems = items.filter((elm, ind) => {\n\n      return ind !== id;\n\n    });\n    deleteTask(todolist_id);\n    setItems(updatedItems);\n\n  }\n\n\n\n\n\n\n\n  const updateTask = (tasname, todolistid) => {\n\n\n\n    Axios.put(`http://localhost:4000/users/${userid}/todolists/${todolistid}`,\n      {\n        tasname: tasname\n\n      }).then((response) => {\n        //alert(\"update\");\n\n      }\n\n      );\n\n\n  }\n\n\n\n\n\n  useEffect(() => {\n\n    Axios.get(`http://localhost:4000/users/${userid}/todolists`,\n\n\n      {}\n\n    ).then(response => {\n\n      var todoid = response.data[0].Todoid\n      setItems(response.data)\n\n    })\n      .catch(err => {\n        console.log(err)\n\n\n      })\n\n\n  }, []);\n\n\n\n\n\n\n\n  const deleteTask = (todolist_id, userid) => {\n  alert(\"id=\"+todolist_id)\n    Axios.delete(`http://localhost:4000/users/${userid}/todolists/${todolist_id}`);\n\n  };\n\n\n  const addItem = () => {\n    if (!task) {\n    } else if (task && !toggleBtn) {\n\n      setItems(\n        items.map((elem) => {\n\n          if (elem.Todoid === isEditItem) {\n            setToggleBtn(true)\n\n            setTasks(\" \")\n            updateTask(task, elem.Todoid)\n            return { ...elem, Todoname: task }\n\n          }\n          return elem;\n        })\n\n      )\n    } else {\n     \n\n\n      \n      setItems([{ Todoname: task, status: false }, ...items]);\n\n      setTasks(\"\");\n      setValidatevalue(\"\");\n\n    }\n  }\n\n\n\n\n\n\n  const editItem = (id) => {\n\n    let newEditItem = items.find((elem) => {\n      \n      return elem.Todoid === id\n\n    });\n    setToggleBtn(false);\n  \n    setTasks(newEditItem.Todoname)\n    \n    setIsEditItem(id)\n\n\n  }\n\n\n  const redirectTask = () => {\n\n\n\n    history.push(\"/users/:userid/Todolists/:todolistId/tasks\");\n\n\n\n  }\n\n\n\n\n  return (\n\n    <react.Fragment>\n\n      <div class=\"parent_div\">\n        <div class=\"container\">\n\n\n          <div class=\"secondcontainer\">\n            <button id=\"logout\" class=\"closebtn\" title=\"Log out\" onClick={() => { history.push(\"/\") }}> ...</button>\n            <label class=\"heading\"> Hi...{username}</label> <br></br>\n\n            <span class=\"thirdcontainer\">\n              <input type=\"text\" ref={inputRef} class=\"todonametxt\" title={validatevalue} value={task} autoComplete=\"off\" maxLength=\"20\" onChange={(e) => passData(e.target.value)}></input>&nbsp;&nbsp;\n            </span>\n\n            <span class=\"imgbutton\">\n              {\n\n                toggleBtn ? <button onClick={submitTask}><img class=\"plusimage\" src=\"/image/plus.png\"></img></button> : <button onClick={addItem}><img class=\"plusimage\" title=\"edit\" src=\"https://img.icons8.com/color/48/000000/edit-property.png\"></img></button>\n              }\n            </span>\n\n\n            {\n\n              items.map((elm, ind) => {\n\n                return (\n\n\n                  <div class=\"insert\" key={ind}>\n\n                    <input type=\"radio\" name=\"taskname\" onChange={(e) => {\n\n                      setItems(items.filter(obj2 => {\n\n\n                        if (obj2.childtodo_id === elm.childtodo_id) {\n\n                          obj2.status = e.target.checked\n\n                          setOptionname(elm.Todoname);\n                          // (elm.Todoid)\n                          Setchildtaskid(elm.Todoid)\n                          //setOptionname(items)\n\n\n                          //   updateTaskStatus(obj2.text,obj2.status,obj2.Todoid)\n\n\n                        }\n                        return obj2\n\n\n                      })\n                      )\n                    }\n\n                    } value={elm.Todoname} checked={elm.status} class=\"optionbtn\" name=\"option\" onClick={redirectTask}\n\n                    />\n\n\n\n\n                    <label name=\"text\">{elm.Todoname}</label>\n                    <img title=\"edit item\" class=\"editimg\" src=\"https://img.icons8.com/color/48/000000/edit-property.png\" onClick={() => editItem(elm.Todoid)} />\n                    <i class=\"fa fa-trash\" title=\"delete Item\" onClick={() => deleteItem(ind, elm.Todoid)}></i>\n\n\n                  </div>\n\n\n                )\n\n              }\n\n\n\n\n\n              )\n\n            }\n\n\n          </div>\n\n        </div>\n\n\n      </div>\n\n\n\n    </react.Fragment>\n\n\n\n  )\n\n}\nexport default Tasklist;"]},"metadata":{},"sourceType":"module"}
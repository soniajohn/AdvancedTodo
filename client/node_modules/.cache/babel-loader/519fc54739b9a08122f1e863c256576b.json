{"ast":null,"code":"var _jsxFileName = \"/home/sonia/projects/AdvancedTodo/client/src/components/TaskList.js\",\n    _s = $RefreshSig$();\n\nimport react from 'react';\nimport React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useContext } from 'react';\nimport Axios from 'axios';\nimport { ListContext } from '../context/ListContext.js';\nimport { useRef, useEffect } from 'react';\nimport { subnetMatch } from 'ipaddr.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Tasklist = () => {\n  _s();\n\n  const {\n    username,\n    SetUsername,\n    userid,\n    SetUserid\n  } = useContext(ListContext);\n  const {\n    optionname,\n    setOptionname\n  } = useContext(ListContext);\n  const [task, setTasks] = useState(\"\");\n  const [items, setItems] = useState([]);\n  const [toggleBtn, setToggleBtn] = useState(true);\n  const [isEditItem, setIsEditItem] = useState(null);\n  const [optStatus, setOptStatus] = useState(false);\n  const [taskValue, setTaskvalue] = useState(\"\");\n  const [validatevalue, setValidatevalue] = useState(\"\");\n  const [fetchlist, setFetchlist] = useState([]);\n  const [showList, setshowList] = useState([]);\n  let history = useHistory();\n  const [usertasklist, setUsertasklist] = useState([]);\n\n  function passData(val) {\n    if (val.length > 0) {\n      var name = val[0].toUpperCase() + val.slice(1);\n    }\n\n    setTasks(name);\n    return val.length < 15 ? '' : setValidatevalue(\"max char 15\");\n  }\n\n  const submitTask = () => {\n    if (task) {\n      //  Axios.post(\"http://localhost:4000/taskinsert\",{\n      //  task:task,userid:userid\n      Axios.post(`http://localhost:4000/users/${userid}/todolists`, {\n        todoid: getid,\n        task: task\n      }).then(() => {\n        alert(\"successful insert\");\n      });\n      addItem();\n    } else {\n      setTaskvalue(\"please fill the field\");\n      inputRef.current.focus();\n    }\n  };\n\n  const inputRef = useRef();\n  useEffect(() => {\n    inputRef.current.focus();\n  });\n\n  const deleteItem = (id, todolist_id) => {\n    const updatedItems = items.filter((elm, ind) => {\n      return ind !== id;\n    });\n    deleteTask(todolist_id);\n    setItems(updatedItems);\n  };\n\n  const updateTask = (tasname, todolistid) => {\n    Axios.put(`http://localhost:4000/users/${userid}/todolists/${todolistid}`, {\n      tasname: tasname\n    }).then(response => {//alert(\"update\");\n    });\n  }; //const updateTaskStatus=(txt,status,Todoid)=>{\n  //  let todolistId=Todoid\n  // Axios.put(`http://localhost:4000/users/${userid}/todolist/${todolistid}`,\n  // { status:status,txtupdate:txt}).then((response)=>\n  // { \n  //alert(\"update\");\n  //  }\n  // );\n  // }\n\n\n  useEffect(() => {\n    Axios.get(`http://localhost:4000/users/${userid}/todolists`, // Axios.get(`http://localhost:4000/fetchData/${userid}`,\n    {\n      userid: userid\n    }).then(response => {\n      var todoid = response.data[0].Todoid;\n      setItems(response.data); // setItems([{Taskid:response.data[0].Taskid,Taskname:task,status:false},...items]); \n    }).catch(err => {\n      console.log(err);\n    });\n    Axios.get(`http://localhost:4000/users/todolists`, {}).then(response => {\n      alert(\"max=\" + response.data[0].Todoid);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const deleteTask = (todolist_id, userid) => {\n    alert(todolist_id);\n    Axios.delete(`http://localhost:4000/users/${userid}/todolists/${todolist_id}`);\n  };\n\n  const addItem = () => {\n    if (!task) {} else if (task && !toggleBtn) {\n      setItems(items.map(elem => {\n        if (elem.Todoid === isEditItem) {\n          setToggleBtn(true);\n          setTasks(\" \");\n          updateTask(task, elem.Todoid);\n          return { ...elem,\n            Todoname: task\n          };\n        }\n\n        return elem;\n      }));\n    } else {\n      // getTaskid()\n      // alert(\"getid=\"+getid)\n      setGetid(parseInt(getid + 1));\n      alert(getid); // setGetid(getid)\n\n      setItems([{\n        Todoid: getid,\n        Todoname: task,\n        status: false\n      }, ...items]);\n      setTasks(\"\");\n      setValidatevalue(\"\");\n    }\n  };\n\n  const editItem = id => {\n    let newEditItem = items.find(elem => {\n      //  alert(\"id=\"+id)\n      return elem.Todoid === id;\n    });\n    setToggleBtn(false); // alert(\"new=\"+newEditItem.Taskname)\n\n    setTasks(newEditItem.Todoname); // alert(\"id=\"+id)\n\n    setIsEditItem(id);\n  };\n\n  const redirectTask = () => {\n    history.push(\"/users/:userid/todolist/:todolistid\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(react.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"parent_div\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"secondcontainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"logout\",\n            class: \"closebtn\",\n            title: \"Log out\",\n            onClick: () => {\n              history.push(\"/\");\n            },\n            children: \" ...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            class: \"heading\",\n            children: [\" Hi...\", username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 27\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 75\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"thirdcontainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              ref: inputRef,\n              class: \"todonametxt\",\n              title: validatevalue,\n              value: task,\n              autoComplete: \"off\",\n              maxLength: \"20\",\n              onChange: e => passData(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 27\n            }, this), \"\\xA0\\xA0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"imgbutton\",\n            children: toggleBtn ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: submitTask,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                class: \"plusimage\",\n                src: \"/image/plus.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 70\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addItem,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                class: \"plusimage\",\n                title: \"edit\",\n                src: \"https://img.icons8.com/color/48/000000/edit-property.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 158\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 132\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 27\n          }, this), items.map((elm, ind) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"insert\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"taskname\",\n                onChange: e => {\n                  setItems(items.filter(obj2 => {\n                    if (obj2.childtodo_id === elm.childtodo_id) {\n                      obj2.status = e.target.checked;\n                      setOptionname(elm.Todoname); //setOptionname(items)\n                      //   updateTaskStatus(obj2.text,obj2.status,obj2.Todoid)\n                    }\n\n                    return obj2;\n                  }));\n                },\n                value: elm.Todoname,\n                checked: elm.status,\n                class: \"optionbtn\",\n                name: \"option\",\n                onClick: redirectTask\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                name: \"text\",\n                children: elm.Todoname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                title: \"edit item\",\n                class: \"editimg\",\n                src: \"https://img.icons8.com/color/48/000000/edit-property.png\",\n                onClick: () => editItem(elm.Todoid)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fa fa-trash\",\n                title: \"delete Item\",\n                onClick: () => deleteItem(ind, elm.Todoid)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 10\n              }, this)]\n            }, ind, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 20\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Tasklist, \"6st/ZfCUX38it20b7KV1yVkO6gQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = Tasklist;\nexport default Tasklist;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tasklist\");","map":{"version":3,"sources":["/home/sonia/projects/AdvancedTodo/client/src/components/TaskList.js"],"names":["react","React","useState","Link","useHistory","useContext","Axios","ListContext","useRef","useEffect","subnetMatch","Tasklist","username","SetUsername","userid","SetUserid","optionname","setOptionname","task","setTasks","items","setItems","toggleBtn","setToggleBtn","isEditItem","setIsEditItem","optStatus","setOptStatus","taskValue","setTaskvalue","validatevalue","setValidatevalue","fetchlist","setFetchlist","showList","setshowList","history","usertasklist","setUsertasklist","passData","val","length","name","toUpperCase","slice","submitTask","post","todoid","getid","then","alert","addItem","inputRef","current","focus","deleteItem","id","todolist_id","updatedItems","filter","elm","ind","deleteTask","updateTask","tasname","todolistid","put","response","get","data","Todoid","catch","err","console","log","delete","map","elem","Todoname","setGetid","parseInt","status","editItem","newEditItem","find","redirectTask","push","e","target","value","obj2","childtodo_id","checked"],"mappings":"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","sourcesContent":["import react from 'react';\nimport React, { useState} from \"react\";\nimport {Link, useHistory} from \"react-router-dom\";\nimport{useContext} from 'react';\nimport Axios from 'axios';\nimport {ListContext} from '../context/ListContext.js'\nimport  { useRef, useEffect } from 'react';\nimport { subnetMatch } from 'ipaddr.js';\n\n\n  \n    \n\nconst Tasklist=()=>{\n\n\n  const{username,SetUsername,userid,SetUserid}=useContext(ListContext);\n    const{optionname,setOptionname}=useContext(ListContext)\n    const [task,setTasks] = useState(\"\");\n    const [items,setItems]=useState([]);\n    const[toggleBtn,setToggleBtn]=useState(true);\n    const[isEditItem,setIsEditItem]=useState(null);\n    const[optStatus,setOptStatus]=useState(false);\n    const[taskValue,setTaskvalue]=useState(\"\")\n    const[validatevalue,setValidatevalue]=useState(\"\")\n    const[fetchlist,setFetchlist]=useState([])\n    const[showList,setshowList]=useState([])\n  \n    let history=useHistory();\n\n    const[usertasklist,setUsertasklist]=useState([])\n\n\n\n\n\n\n\n\n  function passData(val)\n    \n      {\n        if(val.length>0)\n        {\n     var name= val[0].toUpperCase()+val.slice(1)\n      \n        }\n  \n      setTasks(name);\n  \n      return val.length<15 ?'':setValidatevalue(\"max char 15\");\n         \n      }\n\n\n\n  const submitTask=()=>{\n        \n      if(task){\n                \n      //  Axios.post(\"http://localhost:4000/taskinsert\",{\n        \n      //  task:task,userid:userid\n      Axios.post(`http://localhost:4000/users/${userid}/todolists`,{\n            todoid:getid,\n             task:task\n        }).then(()=>{\n          alert(\"successful insert\")});\n          addItem();\n       \n     \n\n                    }\n       else{\n       setTaskvalue(\"please fill the field\");\n       inputRef.current.focus();\n            }\n                       };  \n  \n\n\n    const inputRef = useRef();\n      useEffect(() => {\n       inputRef.current.focus();\n\n                       })\n\n\n\n\n    const deleteItem=(id,todolist_id)=>{\n    const updatedItems=items.filter((elm,ind)=>{\n        \n           return ind!==id;\n       \n                      } ) ;\n             deleteTask(todolist_id);\n             setItems(updatedItems);\n\n          } \n\n\n\n\n\n          \n\n          const updateTask=(tasname,todolistid)=>{\n          \n           \n        \n        Axios.put(`http://localhost:4000/users/${userid}/todolists/${todolistid}`,\n             {\n              tasname:tasname\n            \n              }).then((response)=>\n          \n             { \n               //alert(\"update\");\n        \n              }\n            \n              );\n          \n          \n              }\n\n              \n        //const updateTaskStatus=(txt,status,Todoid)=>{\n          \n                 //  let todolistId=Todoid\n       // Axios.put(`http://localhost:4000/users/${userid}/todolist/${todolistid}`,\n          // { status:status,txtupdate:txt}).then((response)=>\n          \n          // { \n             //alert(\"update\");\n        \n         //  }\n            \n          // );\n          \n          \n         // }\n        \n        \n          useEffect(() => {\n        \n            Axios.get(`http://localhost:4000/users/${userid}/todolists`,\n\n           // Axios.get(`http://localhost:4000/fetchData/${userid}`,\n         { userid:userid}\n            \n            ).then(response=>{\n            \n              var todoid=response.data[0].Todoid\n       setItems(response.data)\n       \n      \n      // setItems([{Taskid:response.data[0].Taskid,Taskname:task,status:false},...items]); \n       \n            })\n            .catch(err=>{\n              console.log(err)\n              \n            \n            })\n           \n\n            Axios.get(`http://localhost:4000/users/todolists`,\n            {})\n            .then(response=>{\n              alert(\"max=\"+response.data[0].Todoid)\n\n            }).catch(err=>{\n\n              console.log(err)\n            })\n          \n            \n        }, []);           \n      \n           \n                \n         \n                  \n\n\n        const deleteTask=(todolist_id,userid)=>{\nalert(todolist_id)\n          Axios.delete(`http://localhost:4000/users/${userid}/todolists/${todolist_id}`);\n      \n                                     };\n \n\n    const addItem=()=>{\n         if(!task){\n                  }else if(task && !toggleBtn){\n\n                  setItems(\n                  items.map((elem)=>{\n                    \n                              if(elem.Todoid===isEditItem){\n                              setToggleBtn(true)\n          \n                              setTasks(\" \")\n                               updateTask(task,elem.Todoid)\n                               return{...elem,Todoname:task}\n            \n                                     }\n                  return elem;\n                  })\n      \n                           )\n                     } else{\n                     // getTaskid()\n                     // alert(\"getid=\"+getid)\n                     setGetid(parseInt(getid+1))\n                     alert(getid)\n                       // setGetid(getid)\n                         setItems([{Todoid:getid,Todoname:task,status:false},...items]);\n\n                          setTasks(\"\");\n                          setValidatevalue(\"\");\n   \n                            }\n                      }\n\n\n\n\n\n\n      const editItem=(id)=>{\n  \n        let newEditItem=items.find((elem)=>{\n      //  alert(\"id=\"+id)\n        return elem.Todoid===id\n\n                          });\n         setToggleBtn(false);\n        // alert(\"new=\"+newEditItem.Taskname)\n          setTasks(newEditItem.Todoname)\n         // alert(\"id=\"+id)\n          setIsEditItem(id)\n\n\n          }\n\n\n        const redirectTask=()=>{\n\n  \n\n        history.push(\"/users/:userid/todolist/:todolistid\");\n\n                 \n\n          }\n\n     \n\n\n    return(\n\n        <react.Fragment>\n          \n          <div class=\"parent_div\">\n                   <div class=\"container\">\n                \n                     \n                          <div class=\"secondcontainer\">\n                          <button id = \"logout\" class=\"closebtn\" title=\"Log out\" onClick={()=>{history.push( \"/\")}}> ...</button>\n                          <label class=\"heading\"> Hi...{username}</label> <br></br> \n                          \n                        <span class=\"thirdcontainer\">\n                          <input type=\"text\"  ref={inputRef} class=\"todonametxt\" title={validatevalue} value={task}autoComplete=\"off\" maxLength=\"20\" onChange={(e)=>passData(e.target.value)}></input>&nbsp;&nbsp;\n                          </span>\n                          \n                          <span class=\"imgbutton\">\n                            {\n\n                              toggleBtn?<button onClick={submitTask}><img class=\"plusimage\"  src=\"/image/plus.png\"></img></button>:<button onClick={addItem}><img class=\"plusimage\" title=\"edit\" src=\"https://img.icons8.com/color/48/000000/edit-property.png\"></img></button>\n                            }\n                            </span>\n                           \n                      \n                          { \n    \n    items.map((elm,ind)=>{\n  \n        return(\n          \n         \n                <div class=\"insert\" key={ind}>\n\n                <input type=\"radio\"  name=\"taskname\"    onChange={(e)=>{\n                \n                 setItems(items.filter(obj2=>{\n                  \n\n                  if(obj2.childtodo_id===elm.childtodo_id){\n          \n                   obj2.status=e.target.checked\n\n                setOptionname(elm.Todoname);\n  \n              //setOptionname(items)\n            \n               \n            //   updateTaskStatus(obj2.text,obj2.status,obj2.Todoid)\n          \n                         \n                  }\n                  return obj2\n               \n                 \n                 })\n                 )}\n               \n                 } value={elm.Todoname} checked={elm.status} class=\"optionbtn\" name=\"option\" onClick= {redirectTask} \n                \n                 />\n                 \n                            \n                \n \n         <label name=\"text\">{elm.Todoname}</label>\n         <img title=\"edit item\" class=\"editimg\" src=\"https://img.icons8.com/color/48/000000/edit-property.png\" onClick={()=>editItem(elm.Todoid)}/>\n         <i class=\"fa fa-trash\" title=\"delete Item\" onClick={()=>deleteItem(ind,elm.Todoid)}></i>\n\n          \n              </div>\n            \n            \n             ) \n            \n            }\n            \n            \n            \n\n                \n            )\n                       \n}\n  \n                      \n                          </div>\n                        \n                   </div>\n                 \n          \n           </div>\n           \n          \n          \n          </react.Fragment>\n          \n            \n          \n          )\n\n}\nexport default Tasklist;"]},"metadata":{},"sourceType":"module"}